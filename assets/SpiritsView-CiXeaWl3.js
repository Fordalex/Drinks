import{d as se,r as y,e as b,f as ne,u as oe,g as ie,p as z,I as re,m as de,h as ue,i as M,j as N,k as ce,l as me,n as ve,q as pe,s as U,t as fe,v as q,x as ye,y as E,z as ge,A as ke,B as O,C as Y,D as be,E as Se,F as he,G as Ve,H as G,J as H,a as t,K as Ce,L as _e,M as D,N as T,O as J,P as Pe,Q as xe,R as Be,_ as we,S as h,w as s,c as V,T as C,U as x,o as m,V as g,b as Te,W as F,X as $e,Y as R,Z as B}from"./index-BghDeidO.js";import{S as Ae,a as Le,b as De}from"./Spirit-D4KWSG1r.js";import{V as w}from"./VContainer-Cb2TnN7s.js";import{V as r}from"./VCol-BPY_Bu4B.js";import"./VRating-CKvnEJF3.js";const Fe=se({name:"SpiritsView",components:{Spirit:Ae,SpiritForm:Le,SelectFromRequest:De},setup(){const e=y([]),a=y(!0),n=b(()=>"https://api.fordsdevelopment.co.uk/drinks/spirits"),l=y(null),v=y([]),d=y([]),p=y([]),u=async()=>{const c=oe(),i=await fetch("https://api.fordsdevelopment.co.uk/drinks/spirits",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}});if(i.ok)a.value=!1,e.value=await i.json();else{a.value=!1;const f=await i.json();l.value=f.error,f.error==="Access token has expired or is invalid."&&(console.log("Access token has expired or is invalid."),c.$reset(),c.clearState())}};return ne(()=>{u()}),{spirits:e,loading:a,endpoint:n,errorMessage:l,selectedSpiritType:v,selectedSpiritStyle:d,selectedDistillery:p}}}),Re=ie("v-alert-title"),Ie=["success","info","warning","error"],je=z({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:re,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ie.includes(e)},...de(),...ue(),...M(),...N(),...ce(),...me(),...ve(),...pe(),...U(),...fe({variant:"flat"})},"VAlert"),ze=q()({name:"VAlert",props:je(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{emit:n,slots:l}=a;const v=ye(e,"modelValue"),d=b(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),p=b(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:u}=E(e),{colorClasses:c,colorStyles:o,variantClasses:i}=ge(p),{densityClasses:f}=ke(e),{dimensionStyles:S}=O(e),{elevationClasses:K}=Y(e),{locationStyles:Q}=be(e),{positionClasses:W}=Se(e),{roundedClasses:X}=he(e),{textColorClasses:Z,textColorStyles:ee}=Ve(G(e,"borderColor")),{t:te}=H(),$=b(()=>({"aria-label":te(e.closeLabel),onClick(P){v.value=!1,n("click:close",P)}}));return()=>{const P=!!(l.prepend||d.value),ae=!!(l.title||e.title),le=!!(l.close||e.closable);return v.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},u.value,c.value,f.value,K.value,W.value,X.value,i.value,e.class],style:[o.value,S.value,Q.value,e.style],role:"alert"},{default:()=>{var A,L;return[Ce(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",Z.value],style:ee.value},null),P&&t("div",{key:"prepend",class:"v-alert__prepend"},[l.prepend?t(D,{key:"prepend-defaults",disabled:!d.value,defaults:{VIcon:{density:e.density,icon:d.value,size:e.prominent?44:28}}},l.prepend):t(_e,{key:"prepend-icon",density:e.density,icon:d.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[ae&&t(Re,{key:"title"},{default:()=>{var k;return[((k=l.title)==null?void 0:k.call(l))??e.title]}}),((A=l.text)==null?void 0:A.call(l))??e.text,(L=l.default)==null?void 0:L.call(l)]),l.append&&t("div",{key:"append",class:"v-alert__append"},[l.append()]),le&&t("div",{key:"close",class:"v-alert__close"},[l.close?t(D,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var k;return[(k=l.close)==null?void 0:k.call(l,{props:$.value})]}}):t(T,J({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},$.value),null)])]}})}}}),Me={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Ne(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function I(e){const[a,n]=e.split("@");return Array.from({length:n}).map(()=>_(a))}function _(e){let a=[];if(!e)return a;const n=Me[e];if(e!==n){if(e.includes(","))return j(e);if(e.includes("@"))return I(e);n.includes(",")?a=j(n):n.includes("@")?a=I(n):n&&a.push(_(n))}return[Ne(e,a)]}function j(e){return e.replace(/\s/g,"").split(",").map(_)}const Ue=z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...M(),...N(),...U()},"VSkeletonLoader"),qe=q()({name:"VSkeletonLoader",props:Ue(),setup(e,a){let{slots:n}=a;const{backgroundColorClasses:l,backgroundColorStyles:v}=Pe(G(e,"color")),{dimensionStyles:d}=O(e),{elevationClasses:p}=Y(e),{themeClasses:u}=E(e),{t:c}=H(),o=b(()=>_(Be(e.type).join(",")));return xe(()=>{var S;const i=!n.default||e.loading,f=e.boilerplate||!i?{}:{ariaLive:"polite",ariaLabel:c(e.loadingText),role:"alert"};return t("div",J({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},u.value,l.value,p.value],style:[v.value,i?d.value:{}]},f),[i?o.value:(S=n.default)==null?void 0:S.call(n)])}),{}}}),Ee={key:0};function Oe(e,a,n,l,v,d){const p=B("SpiritForm"),u=B("SelectFromRequest"),c=B("Spirit");return m(),h(x,null,[t(w,null,{default:s(()=>[t(g,null,{default:s(()=>[t(r,{cols:"6"},{default:s(()=>a[3]||(a[3]=[Te("h1",null,"Drinks",-1)])),_:1}),t(r,{cols:"6",class:"text-right"},{default:s(()=>[t(p,{spirit:e.spirit},{trigger:s(({openDialog:o})=>[t(T,{density:"comfortable",variant:"tonal",text:"New Spirit",onClick:o},null,8,["onClick"])]),_:1},8,["spirit"])]),_:1})]),_:1}),t(g,null,{default:s(()=>[t(r,{cols:"3"},{default:s(()=>[t(u,{path:"spirit_types",key:"name",modelValue:e.selectedSpiritType,"onUpdate:modelValue":a[0]||(a[0]=o=>e.selectedSpiritType=o)},null,8,["modelValue"])]),_:1}),t(r,{cols:"3"},{default:s(()=>[t(u,{path:"spirit_styles",key:"name",modelValue:e.selectedSpiritStyle,"onUpdate:modelValue":a[1]||(a[1]=o=>e.selectedSpiritStyle=o)},null,8,["modelValue"])]),_:1}),t(r,{cols:"3"},{default:s(()=>[t(u,{path:"distilleries",key:"name",modelValue:e.selectedDistillery,"onUpdate:modelValue":a[2]||(a[2]=o=>e.selectedDistillery=o)},null,8,["modelValue"])]),_:1}),t(r,{cols:"3",class:"d-flex align-center"},{default:s(()=>[t(T,{onClick:e.fetchSpirits,color:"primary",class:"width-100",dark:"",elevation:"2"},{default:s(()=>a[4]||(a[4]=[F(" Search ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e.loading?C("",!0):(m(),V(w,{key:0},{default:s(()=>[t(g,null,{default:s(()=>[t(r,{cols:"12"},{default:s(()=>[e.errorMessage?(m(),V(ze,{key:0,type:"error",dismissible:"",border:"left",elevation:"2"},{default:s(()=>[F($e(e.errorMessage),1)]),_:1})):C("",!0)]),_:1})]),_:1}),t(g,null,{default:s(()=>[t(r,{cols:"12"},{default:s(()=>[e.spirits.length==0?(m(),h("p",Ee,"You currently have no drinks registered, press the button above to add drinks.")):C("",!0)]),_:1})]),_:1}),t(g,null,{default:s(()=>[(m(!0),h(x,null,R(e.spirits,(o,i)=>(m(),V(r,{cols:"12",sm:"6",md:"4",lg:"3",key:i,spirit:o},{default:s(()=>[t(c,{spirit:o},null,8,["spirit"])]),_:2},1032,["spirit"]))),128))]),_:1})]),_:1})),e.loading?(m(),V(w,{key:1},{default:s(()=>[t(g,null,{default:s(()=>[(m(),h(x,null,R(16,o=>t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(qe,{class:"border",type:"image, article"})]),_:1})),64))]),_:1})]),_:1})):C("",!0)],64)}const Qe=we(Fe,[["render",Oe]]);export{Qe as default};
