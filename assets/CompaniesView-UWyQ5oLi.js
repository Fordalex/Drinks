import{d as v,e as C,_ as b,o,c as u,w as e,a,p as M,q as j,s as h,v as T,j as w,t as k,b as B,x as L,i as A,y as N,u as S,r as y,f as q,g as _,h as d,F as V,V as p,k as $,l as D}from"./index-BWM7QYSI.js";import{M as F}from"./Map-BjJzDGbQ.js";import{V as m}from"./VContainer-DAXNBUJ0.js";import{V as f}from"./VCol-DTcjvUxT.js";import{V as I,a as U}from"./VSkeletonLoader-mRJ656Cp.js";const z=v({name:"Company",props:{company:{type:Object,required:!0}},setup(n){const s=C(()=>`/Drinks/#/companies/${n.company.id}`),l=C(()=>n.company.brands.map(r=>r.name).join(", "));return{companyLink:s,brands:l}}});function E(n,s,l,r,c,g){return o(),u(N,null,{loader:e(({isActive:t})=>[a(M,{active:t,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:e(()=>[a(j,{height:"250",src:n.company.image_link,cover:""},null,8,["src"]),a(h,null,{default:e(()=>[a(T,null,{default:e(()=>[w(k(n.company.name),1)]),_:1})]),_:1}),a(h,null,{default:e(()=>[B("p",null,"Brands: "+k(n.brands),1)]),_:1}),a(L,null,{default:e(()=>[a(A,{href:n.companyLink,color:"deep-purple-lighten-2",text:"More",block:"",border:""},null,8,["href"])]),_:1})]),_:1})}const H=b(z,[["render",E]]),O=v({name:"HomeView",components:{Map:F,Company:H},setup(){const n=S(),s=y([]),l=y(null),r=y(!0),c=async()=>{const t=await fetch("https://api.fordsdevelopment.co.uk/drinks/companies",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`}});if(t.ok)s.value=await t.json(),r.value=!1;else{const i=await t.json();l.value=i.error,r.value=!1}};return q(()=>{c()}),{fetchCompanies:c,companies:s,errorMessage:l,loading:r}}});function P(n,s,l,r,c,g){const t=D("Company");return o(),_(V,null,[a(m,null,{default:e(()=>[a(p,null,{default:e(()=>[a(f,{cols:"12"},{default:e(()=>s[0]||(s[0]=[B("h1",null,"Companies",-1)])),_:1})]),_:1})]),_:1}),n.loading?d("",!0):(o(),u(m,{key:0},{default:e(()=>[a(p,null,{default:e(()=>[a(f,{cols:"12"},{default:e(()=>[n.errorMessage?(o(),u(I,{key:0,type:"error",dismissible:"",border:"left",elevation:"2"},{default:e(()=>[w(k(n.errorMessage),1)]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1})),n.loading?d("",!0):(o(),u(m,{key:1},{default:e(()=>[a(p,null,{default:e(()=>[(o(!0),_(V,null,$(n.companies,i=>(o(),u(f,{cols:"12",sm:"6",md:"4",lg:"3",key:i.id},{default:e(()=>[a(t,{company:i},null,8,["company"])]),_:2},1024))),128))]),_:1})]),_:1})),n.loading?(o(),u(m,{key:2},{default:e(()=>[a(p,null,{default:e(()=>[(o(),_(V,null,$(16,i=>a(f,{cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[a(U,{class:"border",type:"image, article"})]),_:1})),64))]),_:1})]),_:1})):d("",!0)],64)}const W=b(O,[["render",P]]);export{W as default};
