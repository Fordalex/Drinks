import{d as j,u as z,r as f,e as L,f as ce,p as N,I as me,m as ve,g as pe,h as U,i as H,j as fe,k as ge,l as ye,n as ke,q as O,s as he,t as X,v as be,x as V,y as Y,z as Se,A as Ce,B as G,C as J,D as Ve,E as _e,F as Te,G as $e,H as K,J as Q,a as t,K as we,L as Pe,M as I,N as W,O as Z,_ as ee,o as d,P as g,b as te,Q as $,R as _,S as M,T as k,c as S,w as r,V as h,U as ae,W as Be,X as Ae,Y as Le,Z as Fe,$ as F}from"./index-QfAUzdef.js";import{S as Me,a as Re}from"./Spirit-CuW86CR5.js";import{V as b}from"./VCol-BN_h-Lq7.js";import{V as w}from"./VContainer-NRdJHSEj.js";import"./VRating-pTbIiTpQ.js";const xe=j({name:"SelectFromRequest",props:{path:{type:String,required:!0},key:{type:String,required:!0},value:{type:String,required:!0}},emits:["update:value"],setup(e,{emit:s}){const l=z(),a=f([]),m=f(e.value),u=f(!0),i=f(null),c=3;let v=0;const n=async()=>{if(l.accessToken){u.value=!0,i.value=null;try{const o=await fetch(`https://api.fordsdevelopment.co.uk/drinks/${e.path}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.accessToken}`}});if(!o.ok){if(o.status===500&&v<c){v++,setTimeout(n,500);return}throw new Error(`HTTP error! status: ${o.status}`)}const T=(await o.json()).map(B=>B.name);a.value=Array.isArray(T)?T:[],u.value=!1}catch(o){console.error("Error fetching items:",o),u.value=!1,i.value=o instanceof Error?o.message:String(o)}}},p=o=>{const y=o.target;m.value=y.value,s("update:value",y.value)};return L(()=>e.path,()=>{l.accessToken&&n()},{immediate:!0}),L(()=>l.accessToken,o=>{o&&n()},{immediate:!0}),L(()=>e.value,o=>{m.value=o}),{items:a,selected:m,handleChange:p,loading:u,errorMessage:i}}}),Ee=ce("v-alert-title"),Ie=["success","info","warning","error"],De=N({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:me,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ie.includes(e)},...ve(),...pe(),...U(),...H(),...fe(),...ge(),...ye(),...ke(),...O(),...he({variant:"flat"})},"VAlert"),se=X()({name:"VAlert",props:De(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{emit:l,slots:a}=s;const m=be(e,"modelValue"),u=V(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),i=V(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:c}=Y(e),{colorClasses:v,colorStyles:n,variantClasses:p}=Se(i),{densityClasses:o}=Ce(e),{dimensionStyles:y}=G(e),{elevationClasses:T}=J(e),{locationStyles:B}=Ve(e),{positionClasses:le}=_e(e),{roundedClasses:ne}=Te(e),{textColorClasses:oe,textColorStyles:re}=$e(K(e,"borderColor")),{t:ie}=Q(),R=V(()=>({"aria-label":ie(e.closeLabel),onClick(A){m.value=!1,l("click:close",A)}}));return()=>{const A=!!(a.prepend||u.value),ue=!!(a.title||e.title),de=!!(a.close||e.closable);return m.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},c.value,v.value,o.value,T.value,le.value,ne.value,p.value,e.class],style:[n.value,y.value,B.value,e.style],role:"alert"},{default:()=>{var x,E;return[we(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",oe.value],style:re.value},null),A&&t("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?t(I,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:e.density,icon:u.value,size:e.prominent?44:28}}},a.prepend):t(Pe,{key:"prepend-icon",density:e.density,icon:u.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[ue&&t(Ee,{key:"title"},{default:()=>{var C;return[((C=a.title)==null?void 0:C.call(a))??e.title]}}),((x=a.text)==null?void 0:x.call(a))??e.text,(E=a.default)==null?void 0:E.call(a)]),a.append&&t("div",{key:"append",class:"v-alert__append"},[a.append()]),de&&t("div",{key:"close",class:"v-alert__close"},[a.close?t(I,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var C;return[(C=a.close)==null?void 0:C.call(a,{props:R.value})]}}):t(W,Z({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},R.value),null)])]}})}}}),qe={for:"select",class:"block text"},je=["value"],ze=["value"],Ne={key:1};function Ue(e,s,l,a,m,u){return d(),g(_,null,[te("label",qe,$(e.$props.path),1),!e.loading&&!e.errorMessage?(d(),g("select",{key:0,value:e.selected,onChange:s[0]||(s[0]=(...i)=>e.handleChange&&e.handleChange(...i)),class:"border border-gray-300 rounded-md mb-5"},[(d(!0),g(_,null,M(e.items,i=>(d(),g("option",{key:i,value:i},$(i),9,ze))),128))],40,je)):k("",!0),e.loading&&!e.errorMessage?(d(),g("div",Ne,"Loading...")):k("",!0),e.loading?k("",!0):(d(),S(w,{key:2},{default:r(()=>[t(h,null,{default:r(()=>[t(b,{cols:"12"},{default:r(()=>[e.errorMessage?(d(),S(se,{key:0,type:"error",dismissible:"",border:"left",elevation:"2"},{default:r(()=>[ae($(e.errorMessage),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1}))],64)}const He=ee(xe,[["render",Ue]]),Oe=j({name:"SpiritsView",components:{Spirit:Me,SpiritForm:Re,SelectFromRequest:He},setup(){const e=f([]),s=f(!0),l=V(()=>"https://api.fordsdevelopment.co.uk/drinks/spirits"),a=f(null),m=f([]),u=f([]),i=async()=>{try{const c=z(),v="https://api.fordsdevelopment.co.uk/drinks/spirits";if(!c.accessToken){console.error("No access token available");return}const n=await fetch(v,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);e.value=await n.json(),console.log("Spirits:",e.value),s.value=!1}catch(c){console.log(c),s.value=!1,a.value=c}};return Be(()=>{i()}),{spirits:e,loading:s,endpoint:l,errorMessage:a,selectedSpiritType:m,selectedSpiritStyle:u}}}),Xe={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Ye(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[s])}function D(e){const[s,l]=e.split("@");return Array.from({length:l}).map(()=>P(s))}function P(e){let s=[];if(!e)return s;const l=Xe[e];if(e!==l){if(e.includes(","))return q(e);if(e.includes("@"))return D(e);l.includes(",")?s=q(l):l.includes("@")?s=D(l):l&&s.push(P(l))}return[Ye(e,s)]}function q(e){return e.replace(/\s/g,"").split(",").map(P)}const Ge=N({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...U(),...H(),...O()},"VSkeletonLoader"),Je=X()({name:"VSkeletonLoader",props:Ge(),setup(e,s){let{slots:l}=s;const{backgroundColorClasses:a,backgroundColorStyles:m}=Ae(K(e,"color")),{dimensionStyles:u}=G(e),{elevationClasses:i}=J(e),{themeClasses:c}=Y(e),{t:v}=Q(),n=V(()=>P(Fe(e.type).join(",")));return Le(()=>{var y;const p=!l.default||e.loading,o=e.boilerplate||!p?{}:{ariaLive:"polite",ariaLabel:v(e.loadingText),role:"alert"};return t("div",Z({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},c.value,a.value,i.value],style:[m.value,p?u.value:{}]},o),[p?n.value:(y=l.default)==null?void 0:y.call(l)])}),{}}}),Ke={key:0};function Qe(e,s,l,a,m,u){const i=F("SpiritForm"),c=F("SelectFromRequest"),v=F("Spirit");return d(),g(_,null,[t(w,null,{default:r(()=>[t(h,null,{default:r(()=>[t(b,{cols:"12"},{default:r(()=>[s[2]||(s[2]=te("h1",null,"Drinks",-1)),t(i,{spirit:e.spirit},{trigger:r(({openDialog:n})=>[t(W,{density:"comfortable",variant:"tonal",text:"New Spirit",onClick:n},null,8,["onClick"])]),_:1},8,["spirit"]),t(c,{path:"spirit_types",key:"name",modelValue:e.selectedSpiritType,"onUpdate:modelValue":s[0]||(s[0]=n=>e.selectedSpiritType=n)},null,8,["modelValue"]),t(c,{path:"spirit_styles",key:"name",modelValue:e.selectedSpiritStyle,"onUpdate:modelValue":s[1]||(s[1]=n=>e.selectedSpiritStyle=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e.loading?k("",!0):(d(),S(w,{key:0},{default:r(()=>[t(h,null,{default:r(()=>[t(b,{cols:"12"},{default:r(()=>[e.errorMessage?(d(),S(se,{key:0,type:"error",dismissible:"",border:"left",elevation:"2"},{default:r(()=>[ae($(e.errorMessage),1)]),_:1})):k("",!0)]),_:1})]),_:1}),t(h,null,{default:r(()=>[t(b,{cols:"12"},{default:r(()=>[e.spirits.length==0?(d(),g("p",Ke,"You currently have no drinks registered, press the button above to add drinks.")):k("",!0)]),_:1})]),_:1}),t(h,null,{default:r(()=>[(d(!0),g(_,null,M(e.spirits,(n,p)=>(d(),S(b,{cols:"12",sm:"6",md:"4",lg:"3",key:p,spirit:n},{default:r(()=>[t(v,{spirit:n},null,8,["spirit"])]),_:2},1032,["spirit"]))),128))]),_:1})]),_:1})),e.loading?(d(),S(w,{key:1},{default:r(()=>[t(h,null,{default:r(()=>[(d(),g(_,null,M(16,n=>t(b,{cols:"12",sm:"6",md:"4",lg:"3"},{default:r(()=>[t(Je,{class:"border",type:"image, article"})]),_:1})),64))]),_:1})]),_:1})):k("",!0)],64)}const st=ee(Oe,[["render",Qe]]);export{st as default};
