import{d as V,_,o as r,c as y,w as i,a as e,a0 as C,a1 as D,a2 as b,a3 as w,W as T,X as u,a4 as B,b as a,L as x,a5 as A,V as k,a6 as L,N,a7 as S,u as j,S as o,T as M,U as m,Z as f,Y as F}from"./index-DPdAKDps.js";import{V as I}from"./VRating-uFnP-6wO.js";import{M as z}from"./Map-BK3g5ezJ.js";import{V as U}from"./VContainer-Co1GXd4_.js";import{V as h}from"./VCol-DV9ojT42.js";const R=V({name:"Distillery",props:{distillery:{type:Object,required:!0}},computed:{distilleryLink(s){return`/Drinks/#/distilleries/${s}`}}});function q(s,l,n,t,d,$){return r(),y(S,null,{loader:i(({isActive:c})=>[e(C,{active:c,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:i(()=>[e(D,{height:"250",src:s.distillery.image_link,cover:""},null,8,["src"]),e(b,null,{default:i(()=>[e(w,null,{default:i(()=>[T(u(s.distillery.name),1)]),_:1}),e(B,null,{default:i(()=>[l[0]||(l[0]=a("span",{class:"me-1"},"Local Favorite",-1)),e(x,{color:"error",icon:"mdi-fire-circle",size:"small"})]),_:1})]),_:1}),e(A,null,{default:i(()=>[e(k,{align:"center",class:"mx-0"},{default:i(()=>[e(I,{"model-value":4.5,color:"amber",density:"compact",size:"small","half-increments":"",readonly:""}),l[1]||(l[1]=a("div",{class:"text-grey ms-4"},"4.5 (413)",-1))]),_:1}),l[2]||(l[2]=a("div",{class:"my-4 text-subtitle-1"},"$ â€¢ Italian, Cafe",-1)),a("div",null,u(s.distillery.description||"No description."),1)]),_:1}),e(L,null,{default:i(()=>[e(N,{color:"deep-purple-lighten-2",text:"More",block:"",border:""})]),_:1})]),_:1})}const E=_(R,[["render",q]]),O=V({name:"App",components:{Distillery:E,Map:z},data(){return{distilleries:[],pins:[]}},mounted(){this.fetchDistilleries()},methods:{async fetchDistilleries(){const s=j(),n=await fetch("https://api.fordsdevelopment.co.uk/drinks/distilleries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`}});if(n.ok)this.distilleries=await n.json(),this.pins=this.distilleries.filter(t=>{if(t.lat)return t}).map(t=>({lat:parseFloat(t.lat),lng:parseFloat(t.lng),body:`<h4>${t.name}</h4>
                <ul>
                  ${t.spirits.map(d=>`
                    <li>
                      <a href="/Drinks/#/spirits/${d.id}">${d.name}</a>
                    </li>
                  `).join("")}
                </ul>
          `}));else{const t=await n.json();console.error(t.error),t.error==="Access token has expired or is invalid."&&(console.log("Access token has expired or is invalid."),s.$reset(),s.clearState())}}}}),P={key:0},W={key:0,class:"row m-0 g-2 p-2"},X={key:1};function Y(s,l,n,t,d,$){const c=f("Map"),g=f("Distillery");return r(),o(m,null,[s.pins.length>0?(r(),o("div",P,[e(c,{pins:s.pins},null,8,["pins"])])):M("",!0),a("main",null,[s.distilleries.length>0?(r(),o("div",W,[e(U,null,{default:i(()=>[e(k,null,{default:i(()=>[e(h,{cols:"12"},{default:i(()=>l[0]||(l[0]=[a("h1",null,"Distilleries",-1)])),_:1}),(r(!0),o(m,null,F(s.distilleries,(p,v)=>(r(),y(h,{cols:"12",sm:"3",key:v,distillery:p},{default:i(()=>[e(g,{distillery:p},null,8,["distillery"])]),_:2},1032,["distillery"]))),128))]),_:1})]),_:1})])):(r(),o("p",X,"Loading distilleries..."))])],64)}const Q=_(O,[["render",Y]]);export{Q as default};
