import{d as y,e as C,_ as V,o as r,c as k,w as i,a as e,a0 as D,a1 as b,a2 as w,a3 as L,W as T,X as u,a4 as B,b as a,L as A,a5 as N,V as _,a6 as S,N as j,a7 as x,u as M,S as o,T as F,U as m,Z as f,Y as I}from"./index-BghDeidO.js";import{V as z}from"./VRating-CKvnEJF3.js";import{M as U}from"./Map-CLaOQmHL.js";import{V as R}from"./VContainer-Cb2TnN7s.js";import{V as h}from"./VCol-BPY_Bu4B.js";const q=y({name:"Distillery",props:{distillery:{type:Object,required:!0}},setup(s){return{distilleryLink:C(()=>`/Drinks/#/distilleries/${s.distillery.id}`)}}});function E(s,l,n,t,d,$){return r(),k(x,null,{loader:i(({isActive:p})=>[e(D,{active:p,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:i(()=>[e(b,{height:"250",src:s.distillery.image_link,cover:""},null,8,["src"]),e(w,null,{default:i(()=>[e(L,null,{default:i(()=>[T(u(s.distillery.name),1)]),_:1}),e(B,null,{default:i(()=>[l[0]||(l[0]=a("span",{class:"me-1"},"Local Favorite",-1)),e(A,{color:"error",icon:"mdi-fire-circle",size:"small"})]),_:1})]),_:1}),e(N,null,{default:i(()=>[e(_,{align:"center",class:"mx-0"},{default:i(()=>[e(z,{"model-value":4.5,color:"amber",density:"compact",size:"small","half-increments":"",readonly:""}),l[1]||(l[1]=a("div",{class:"text-grey ms-4"},"4.5 (413)",-1))]),_:1}),l[2]||(l[2]=a("div",{class:"my-4 text-subtitle-1"},"$ â€¢ Italian, Cafe",-1)),a("div",null,u(s.distillery.description||"No description."),1)]),_:1}),e(S,null,{default:i(()=>[e(j,{href:s.distilleryLink,color:"deep-purple-lighten-2",text:"More",block:"",border:""},null,8,["href"])]),_:1})]),_:1})}const O=V(q,[["render",E]]),P=y({name:"App",components:{Distillery:O,Map:U},data(){return{distilleries:[],pins:[]}},mounted(){this.fetchDistilleries()},methods:{async fetchDistilleries(){const s=M(),n=await fetch("https://api.fordsdevelopment.co.uk/drinks/distilleries",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`}});if(n.ok)this.distilleries=await n.json(),this.pins=this.distilleries.filter(t=>{if(t.lat)return t}).map(t=>({lat:parseFloat(t.lat),lng:parseFloat(t.lng),body:`<h4>${t.name}</h4>
                <ul>
                  ${t.spirits.map(d=>`
                    <li>
                      <a href="/Drinks/#/spirits/${d.id}">${d.name}</a>
                    </li>
                  `).join("")}
                </ul>
          `}));else{const t=await n.json();console.error(t.error),t.error==="Access token has expired or is invalid."&&(console.log("Access token has expired or is invalid."),s.$reset(),s.clearState())}}}}),W={key:0},X={key:0,class:"row m-0 g-2 p-2"},Y={key:1};function Z(s,l,n,t,d,$){const p=f("Map"),g=f("Distillery");return r(),o(m,null,[s.pins.length>0?(r(),o("div",W,[e(p,{pins:s.pins},null,8,["pins"])])):F("",!0),a("main",null,[s.distilleries.length>0?(r(),o("div",X,[e(R,null,{default:i(()=>[e(_,null,{default:i(()=>[e(h,{cols:"12"},{default:i(()=>l[0]||(l[0]=[a("h1",null,"Distilleries",-1)])),_:1}),(r(!0),o(m,null,I(s.distilleries,(c,v)=>(r(),k(h,{cols:"12",sm:"3",key:v,distillery:c},{default:i(()=>[e(g,{distillery:c},null,8,["distillery"])]),_:2},1032,["distillery"]))),128))]),_:1})]),_:1})])):(r(),o("p",Y,"Loading distilleries..."))])],64)}const ee=V(P,[["render",Z]]);export{ee as default};
