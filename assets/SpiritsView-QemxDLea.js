import{d as se,r as f,e as k,f as ne,u as oe,g as re,p as z,I as ie,m as de,h as ue,i as M,j,k as ce,l as me,n as ve,q as pe,s as E,t as fe,v as U,x as ye,y as q,z as ge,A as ke,B as O,C as H,D as be,E as Se,F as he,G as Ve,H as Y,J as G,a as t,K as Ce,L as _e,M as D,N as B,O as J,P as Pe,Q as Te,R as we,_ as xe,S,w as s,c as h,T as V,U as T,o as m,V as y,b as Be,W as F,X as $e,Y as R,Z as w}from"./index-D2dlZQRr.js";import{S as Le,a as Ae,b as De}from"./Spirit-orUkVM6b.js";import{V as x}from"./VContainer-sanRjhH4.js";import{V as d}from"./VCol-Dz9B0k35.js";import"./VRating-4qwSQ0g4.js";const Fe=se({name:"SpiritsView",components:{Spirit:Le,SpiritForm:Ae,SelectFromRequest:De},setup(){const e=f([]),a=f(!0),n=k(()=>"https://api.fordsdevelopment.co.uk/drinks/spirits"),l=f(null),v=f([]),u=f([]),p=f([]),c=async()=>{try{const r=oe(),o="https://api.fordsdevelopment.co.uk/drinks/spirits";if(!r.accessToken){console.error("No access token available");return}const i=await fetch(o,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.accessToken}`}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);e.value=await i.json(),console.log("Spirits:",e.value),a.value=!1}catch(r){console.log(r),a.value=!1,l.value=r}};return ne(()=>{c()}),{spirits:e,loading:a,endpoint:n,errorMessage:l,selectedSpiritType:v,selectedSpiritStyle:u,selectedDistillery:p}}}),Re=re("v-alert-title"),Ie=["success","info","warning","error"],Ne=z({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:ie,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Ie.includes(e)},...de(),...ue(),...M(),...j(),...ce(),...me(),...ve(),...pe(),...E(),...fe({variant:"flat"})},"VAlert"),ze=U()({name:"VAlert",props:Ne(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{emit:n,slots:l}=a;const v=ye(e,"modelValue"),u=k(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),p=k(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:c}=q(e),{colorClasses:r,colorStyles:o,variantClasses:i}=ge(p),{densityClasses:_}=ke(e),{dimensionStyles:b}=O(e),{elevationClasses:K}=H(e),{locationStyles:Q}=be(e),{positionClasses:W}=Se(e),{roundedClasses:X}=he(e),{textColorClasses:Z,textColorStyles:ee}=Ve(Y(e,"borderColor")),{t:te}=G(),$=k(()=>({"aria-label":te(e.closeLabel),onClick(P){v.value=!1,n("click:close",P)}}));return()=>{const P=!!(l.prepend||u.value),ae=!!(l.title||e.title),le=!!(l.close||e.closable);return v.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},c.value,r.value,_.value,K.value,W.value,X.value,i.value,e.class],style:[o.value,b.value,Q.value,e.style],role:"alert"},{default:()=>{var L,A;return[Ce(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",Z.value],style:ee.value},null),P&&t("div",{key:"prepend",class:"v-alert__prepend"},[l.prepend?t(D,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:e.density,icon:u.value,size:e.prominent?44:28}}},l.prepend):t(_e,{key:"prepend-icon",density:e.density,icon:u.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[ae&&t(Re,{key:"title"},{default:()=>{var g;return[((g=l.title)==null?void 0:g.call(l))??e.title]}}),((L=l.text)==null?void 0:L.call(l))??e.text,(A=l.default)==null?void 0:A.call(l)]),l.append&&t("div",{key:"append",class:"v-alert__append"},[l.append()]),le&&t("div",{key:"close",class:"v-alert__close"},[l.close?t(D,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var g;return[(g=l.close)==null?void 0:g.call(l,{props:$.value})]}}):t(B,J({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},$.value),null)])]}})}}}),Me={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function je(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function I(e){const[a,n]=e.split("@");return Array.from({length:n}).map(()=>C(a))}function C(e){let a=[];if(!e)return a;const n=Me[e];if(e!==n){if(e.includes(","))return N(e);if(e.includes("@"))return I(e);n.includes(",")?a=N(n):n.includes("@")?a=I(n):n&&a.push(C(n))}return[je(e,a)]}function N(e){return e.replace(/\s/g,"").split(",").map(C)}const Ee=z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...M(),...j(),...E()},"VSkeletonLoader"),Ue=U()({name:"VSkeletonLoader",props:Ee(),setup(e,a){let{slots:n}=a;const{backgroundColorClasses:l,backgroundColorStyles:v}=Pe(Y(e,"color")),{dimensionStyles:u}=O(e),{elevationClasses:p}=H(e),{themeClasses:c}=q(e),{t:r}=G(),o=k(()=>C(we(e.type).join(",")));return Te(()=>{var b;const i=!n.default||e.loading,_=e.boilerplate||!i?{}:{ariaLive:"polite",ariaLabel:r(e.loadingText),role:"alert"};return t("div",J({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},c.value,l.value,p.value],style:[v.value,i?u.value:{}]},_),[i?o.value:(b=n.default)==null?void 0:b.call(n)])}),{}}}),qe={key:0};function Oe(e,a,n,l,v,u){const p=w("SpiritForm"),c=w("SelectFromRequest"),r=w("Spirit");return m(),S(T,null,[t(x,null,{default:s(()=>[t(y,null,{default:s(()=>[t(d,{cols:"6"},{default:s(()=>a[3]||(a[3]=[Be("h1",null,"Drinks",-1)])),_:1}),t(d,{cols:"6",class:"text-right"},{default:s(()=>[t(p,{spirit:e.spirit},{trigger:s(({openDialog:o})=>[t(B,{density:"comfortable",variant:"tonal",text:"New Spirit",onClick:o},null,8,["onClick"])]),_:1},8,["spirit"])]),_:1})]),_:1}),t(y,null,{default:s(()=>[t(d,{cols:"3"},{default:s(()=>[t(c,{path:"spirit_types",key:"name",modelValue:e.selectedSpiritType,"onUpdate:modelValue":a[0]||(a[0]=o=>e.selectedSpiritType=o)},null,8,["modelValue"])]),_:1}),t(d,{cols:"3"},{default:s(()=>[t(c,{path:"spirit_styles",key:"name",modelValue:e.selectedSpiritStyle,"onUpdate:modelValue":a[1]||(a[1]=o=>e.selectedSpiritStyle=o)},null,8,["modelValue"])]),_:1}),t(d,{cols:"3"},{default:s(()=>[t(c,{path:"distilleries",key:"name",modelValue:e.selectedDistillery,"onUpdate:modelValue":a[2]||(a[2]=o=>e.selectedDistillery=o)},null,8,["modelValue"])]),_:1}),t(d,{cols:"3",class:"d-flex align-center"},{default:s(()=>[t(B,{onClick:e.fetchSpirits,color:"primary",class:"width-100",dark:"",elevation:"2"},{default:s(()=>a[4]||(a[4]=[F(" Search ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e.loading?V("",!0):(m(),h(x,{key:0},{default:s(()=>[t(y,null,{default:s(()=>[t(d,{cols:"12"},{default:s(()=>[e.errorMessage?(m(),h(ze,{key:0,type:"error",dismissible:"",border:"left",elevation:"2"},{default:s(()=>[F($e(e.errorMessage),1)]),_:1})):V("",!0)]),_:1})]),_:1}),t(y,null,{default:s(()=>[t(d,{cols:"12"},{default:s(()=>[e.spirits.length==0?(m(),S("p",qe,"You currently have no drinks registered, press the button above to add drinks.")):V("",!0)]),_:1})]),_:1}),t(y,null,{default:s(()=>[(m(!0),S(T,null,R(e.spirits,(o,i)=>(m(),h(d,{cols:"12",sm:"6",md:"4",lg:"3",key:i,spirit:o},{default:s(()=>[t(r,{spirit:o},null,8,["spirit"])]),_:2},1032,["spirit"]))),128))]),_:1})]),_:1})),e.loading?(m(),h(x,{key:1},{default:s(()=>[t(y,null,{default:s(()=>[(m(),S(T,null,R(16,o=>t(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(Ue,{class:"border",type:"image, article"})]),_:1})),64))]),_:1})]),_:1})):V("",!0)],64)}const Qe=xe(Fe,[["render",Oe]]);export{Qe as default};
